<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>info/aryEx.html</title>
  </head>
  <body>
    <div id="show">
      <table border="1">
        <thead id="title"></thead>
        <tbody id="list"></tbody>
      </table>
    </div>
    <script>
      const fruits = [
        { name: "apple", price: 100, like: 3.5 },
        { name: "banana", price: 200, like: 4.5 },
        { name: "cherry", price: 300, like: 5 },
      ];
      const titles = ["과일", "가격", "선호도"];
      titles.forEach((item, idx, ary) => {
        let th = document.createElement("th");
        th.innerText = item;
        title.append(th);
      });
      fruits.forEach((item, idx, ary) => {
        if (item.like > 4) {
          let tr = document.createElement("tr");
          for (let prop in item) {
            let td = document.createElement("td");
            td.innerHTML = item[prop];
            tr.append(td);
          }
          list.append(tr);
        }
      });

      let over4 = [];
      /* fruits.forEach((item, idx, ary) => {
        if (item.like > 4) {
          over4.push(item.name);
        }
      }); */
      over4 = fruits.filter((item) => item.like > 4);
      console.log(over4);

      document.querySelectorAll("#list tr").forEach((item, idx, ary) => {
        item.firstChild.style.backgroundColor = "yellow";
      });

      let nFruits = fruits.map((item, idx) => {
        let nFruit = {};
        nFruit.ord = idx + 1;
        nFruit.fname = item.name;
        nFruit.price = item.price;
        return nFruit;
      });
      console.log(nFruits);

      // fruits 배열에 있는 가격의 합
      let priceSum = 0;
      fruits.forEach((item) => {
        priceSum += item.price;
      });
      console.log(priceSum);

      //reduce => 반복인데 1회 반복할때마다 accum값에 return값을 적용
      let result = fruits.reduce((accum, item, idx, ary) => {
        return (accum += item.like);
      }, 0); // 0은 accum의 초기값, 지정하지 않을경우 accum = idx1
      console.log(result / fruits.length);

      let result1 = fruits.reduce((accum, item, idx, ary) => {
        console.log(accum);
        let tr = document.createElement("tr");
        for (let prop in item) {
          let td = document.createElement("td");
          td.innerText = item[prop];
          tr.append(td);
        }
        accum.append(tr);
        return accum;
      }, document.querySelector('tbody[id="list"]'));
    </script>
  </body>
</html>
